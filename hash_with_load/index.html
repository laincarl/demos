<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./jquery.js"></script>
    <link rel="stylesheet" href="./layui.css">
    <style>
        /* 整体容器 */
        
        .container {
            display: flex;
        }
        
        #content {
            flex: 1;
            border: 1px dashed gray;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- 左侧菜单 -->
        <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="demo" style="margin-right: 10px;">
            <li class="layui-nav-item layui-nav-itemed">
                <a href="javascript:;">默认展开</a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;">选项一</a></dd>
                    <dd><a href="javascript:;">选项二</a></dd>
                    <dd><a href="javascript:;">选项三</a></dd>
                    <dd><a href="">跳转项</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">解决方案</a>
                <dl class="layui-nav-child">
                    <dd><a href="">移动模块</a></dd>
                    <dd><a href="">后台模版</a></dd>
                    <dd><a href="">电商平台</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="javascript:;">云市场</a></li>
            <li class="layui-nav-item"><a href="javascript:;">社区</a></li>
        </ul>
        <div id="content">
            内容区域
        </div>
    </div>
    <script src="./layui.all.js"></script>
    <script>
        function getParamsUrl() {
            var hashDeatail = location.hash.split("?"),
                hashName = hashDeatail[0].split("#")[1], //路由地址
                params = hashDeatail[1] ? hashDeatail[1].split("&") : [], //参数内容
                query = {};
            for (var i = 0; i < params.length; i++) {
                var item = params[i].split("=");
                query[item[0]] = item[1]
            }
            return {
                path: hashName,
                query: query
            }
        }

        function setHash(hash) {
            location.hash = hash;
        }
    </script>
    <script>
        // 菜单配置，key为菜单的文本
        const menus = {
            // 默认菜单配置
            default: {
                text: "选项一",
                url: '/a',
                html: 'a.html'
            },
            '选项一': {
                url: '/a',
                html: 'a.html'
            },
            '选项二': {
                url: '/b',
                html: 'b.html'
            }
        };
        layui.use('element', function() {
            // 初始化
            var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
            // 刷新后加载
            var path = getParamsUrl().path;
            if (path) {
                // 刷新后加载正确html
                $.each(menus, function(key, value) {
                    if (value.url === path) {
                        $('#content').load(value.html);
                    }
                });
                // 刷新后选中菜单
                $("[href='javascript:;']").each(function(i) {
                    var text = $(this).text();
                    if (menus[text] && menus[text].url === path) {
                        $(this).addClass("layui-this")
                    }
                });
            } else {
                // 选择默认项
                $("[href='javascript:;']").each(function(i) {
                    var text = $(this).text();
                    if (menus['default'] && menus['default'].text === text) {
                        $(this).addClass("layui-this")
                    }
                });
                // 加载默认html
                $('#content').load(menus['default'].html);
            }
            if (menus[path]) {
                $('#content').load(html);
            }

            //监听导航点击，设置hash加载html
            element.on('nav(demo)', function(elem) {
                var text = elem.text();
                if (menus[text]) {
                    var url = menus[text].url;
                    var html = menus[text].html;
                    setHash(url);
                    $('#content').load(html);
                }

                // layer.msg(elem.text());
            });
        });
    </script>

</body>

</html>